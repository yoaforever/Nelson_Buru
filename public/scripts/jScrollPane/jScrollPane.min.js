/*
 * jScrollPane - v2.0.0beta5 - 2010-09-18
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT and GPL licenses.
 */
!function(t,n,i){t.fn.jScrollPane=function(n){function e(n,e){function s(e){var a,c,p,d,u,j;if(F=e,L==i)n.css({overflow:"hidden",padding:0}),X=n.innerWidth()+vn,Y=n.innerHeight(),n.width(X),L=t('<div class="jspPane" />').wrap(t('<div class="jspContainer" />').css({width:X+"px",height:Y+"px"})),n.wrapInner(L.parent()),q=n.find(">.jspContainer"),L=q.find(">.jspPane"),L.css("padding",jn);else{if(n.css("width",null),j=n.outerWidth()+vn!=X||n.outerHeight()!=Y,j&&(X=n.innerWidth()+vn,Y=n.innerHeight(),q.css({width:X+"px",height:Y+"px"})),gn=L.innerWidth(),!j&&L.outerWidth()==V&&L.outerHeight()==G)return void((K||N)&&(L.css("width","693px"),n.css("width","693px")));L.css("width",null),n.css("width",X+"px"),q.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}a=L.clone().css("position","absolute"),c=t('<div style="width:1px; position: relative;" />').append(a),t("body").append(c),V=Math.max(L.outerWidth(),a.outerWidth()),c.remove(),G=L.outerHeight(),O=V/X,E=G/Y,N=E>1,K=O>1,K||N?(n.addClass("jspScrollable"),p=F.maintainPosition&&($||_),p&&(d=D(),u=T()),o(),r(),l(),p&&(H(d),C(u)),W(),A(),F.enableKeyboardNavigation&&I(),F.clickOnTrack&&h(),M(),F.hijackInternalLinks&&z()):(n.removeClass("jspScrollable"),L.css({top:0,width:q.width()-vn}),S(),y(),P(),f(),R()),F.autoReinitialise&&!fn?fn=setInterval(function(){s(F)},F.autoReinitialiseDelay):!F.autoReinitialise&&fn&&clearInterval(fn),n.trigger("jsp-initialised",[K||N])}function o(){N&&(q.append(t('<div class="jspVerticalBar" />').append(t('<div class="jspCap jspCapTop" />'),t('<div class="jspTrack" />').append(t('<div class="jspDrag" />').append(t('<div class="jspDragTop" />'),t('<div class="jspDragBottom" />'))),t('<div class="jspCap jspCapBottom" />'))),tn=q.find(">.jspVerticalBar"),nn=tn.find(">.jspTrack"),Q=nn.find(">.jspDrag"),F.showArrows&&(an=t('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",d(0,-1)).bind("click.jsp",B),rn=t('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",d(0,1)).bind("click.jsp",B),F.arrowScrollOnHover&&(an.bind("mouseover.jsp",d(0,-1,an)),rn.bind("mouseover.jsp",d(0,1,rn))),p(nn,F.verticalArrowPositions,an,rn)),sn=Y,q.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){sn-=t(this).outerHeight()}),Q.hover(function(){Q.addClass("jspHover")},function(){Q.removeClass("jspHover")}).bind("mousedown.jsp",function(n){t("html").bind("dragstart.jsp selectstart.jsp",function(){return!1}),Q.addClass("jspActive");var i=n.pageY-Q.position().top;return t("html").bind("mousemove.jsp",function(t){v(t.pageY-i,!1)}).bind("mouseup.jsp mouseleave.jsp",j),!1}),a())}function a(){nn.height(sn+"px"),$=0,en=F.verticalGutter+nn.outerWidth(),L.width(X-en-vn),0==tn.position().left&&L.css("margin-left",en+"px")}function r(){K&&(q.append(t('<div class="jspHorizontalBar" />').append(t('<div class="jspCap jspCapLeft" />'),t('<div class="jspTrack" />').append(t('<div class="jspDrag" />').append(t('<div class="jspDragLeft" />'),t('<div class="jspDragRight" />'))),t('<div class="jspCap jspCapRight" />'))),cn=q.find(">.jspHorizontalBar"),ln=cn.find(">.jspTrack"),J=ln.find(">.jspDrag"),F.showArrows&&(un=t('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",d(-1,0)).bind("click.jsp",B),hn=t('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",d(1,0)).bind("click.jsp",B),F.arrowScrollOnHover&&(un.bind("mouseover.jsp",d(-1,0,un)),hn.bind("mouseover.jsp",d(1,0,hn))),p(ln,F.horizontalArrowPositions,un,hn)),J.hover(function(){J.addClass("jspHover")},function(){J.removeClass("jspHover")}).bind("mousedown.jsp",function(n){t("html").bind("dragstart.jsp selectstart.jsp",function(){return!1}),J.addClass("jspActive");var i=n.pageX-J.position().left;return t("html").bind("mousemove.jsp",function(t){m(t.pageX-i,!1)}).bind("mouseup.jsp mouseleave.jsp",j),!1}),pn=q.innerWidth(),c())}function c(){q.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){pn-=t(this).outerWidth()}),ln.width(pn+"px"),_=0}function l(){if(K&&N){var n=ln.outerHeight(),i=nn.outerWidth();sn-=n,t(cn).find(">.jspCap:visible,>.jspArrow").each(function(){pn+=t(this).outerWidth()}),pn-=i,Y-=i,X-=n,ln.parent().append(t('<div class="jspCorner" />').css("width",n+"px")),a(),c()}K&&L.width(q.outerWidth()-vn+"px"),G=L.outerHeight(),E=G/Y,K&&(dn=1/O*pn,dn>F.horizontalDragMaxWidth?dn=F.horizontalDragMaxWidth:dn<F.horizontalDragMinWidth&&(dn=F.horizontalDragMinWidth),J.width(dn+"px"),Z=pn-dn,w(_)),N&&(on=1/E*sn,on>F.verticalDragMaxHeight?on=F.verticalDragMaxHeight:on<F.verticalDragMinHeight&&(on=F.verticalDragMinHeight),Q.height(on+"px"),U=sn-on,g($))}function p(t,n,i,e){var s,o="before",a="after";"os"==n&&(n=/Mac/.test(navigator.platform)?"after":"split"),n==o?a=n:n==a&&(o=n,s=i,i=e,e=s),t[o](i)[a](e)}function d(t,n,i){return function(){return u(t,n,this,i),this.blur(),!1}}function u(n,e,s,o){s=t(s).addClass("jspActive");var a,r=function(){0!=n&&m(_+n*F.arrowButtonSpeed,!1),0!=e&&v($+e*F.arrowButtonSpeed,!1)},c=setInterval(r,F.arrowRepeatFreq);r(),a=o==i?"mouseup.jsp":"mouseout.jsp",o=o||t("html"),o.bind(a,function(){s.removeClass("jspActive"),clearInterval(c),o.unbind(a)})}function h(){f(),N&&nn.bind("mousedown.jsp",function(n){if(n.originalTarget==i||n.originalTarget==n.currentTarget){var e=t(this),s=setInterval(function(){var t=e.offset(),i=n.pageY-t.top;i>$+on?v($+F.trackClickSpeed):$>i?v($-F.trackClickSpeed):o()},F.trackClickRepeatFreq),o=function(){s&&clearInterval(s),s=null,t(document).unbind("mouseup.jsp",o)};return t(document).bind("mouseup.jsp",o),!1}}),K&&ln.bind("mousedown.jsp",function(n){if(n.originalTarget==i||n.originalTarget==n.currentTarget){var e=t(this),s=setInterval(function(){var t=e.offset(),i=n.pageX-t.left;i>_+dn?m(_+F.trackClickSpeed):_>i?m(_-F.trackClickSpeed):o()},F.trackClickRepeatFreq),o=function(){s&&clearInterval(s),s=null,t(document).unbind("mouseup.jsp",o)};return t(document).bind("mouseup.jsp",o),!1}})}function f(){ln&&ln.unbind("mousedown.jsp"),nn&&nn.unbind("mousedown.jsp")}function j(){t("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Q&&Q.removeClass("jspActive"),J&&J.removeClass("jspActive")}function v(t,n){N&&(0>t?t=0:t>U&&(t=U),n==i&&(n=F.animateScroll),n?mn.animate(Q,"top",t,g):(Q.css("top",t),g(t)))}function g(t){t==i&&(t=Q.position().top),q.scrollTop(0),$=t;var e=0==$,s=$==U,o=t/U,a=-o*(G-Y);(wn!=e||kn!=s)&&(wn=e,kn=s,n.trigger("jsp-arrow-change",[wn,kn,bn,Cn])),b(e,s),L.css("top",a),n.trigger("jsp-scroll-y",[-a,e,s])}function m(t,n){K&&(0>t?t=0:t>Z&&(t=Z),n==i&&(n=F.animateScroll),n?mn.animate(J,"left",t,w):(J.css("left",t),w(t)))}function w(t){t==i&&(t=J.position().left),q.scrollTop(0),_=t;var e=0==_,s=_==Z,o=t/Z,a=-o*(V-X);(bn!=e||Cn!=s)&&(bn=e,Cn=s,n.trigger("jsp-arrow-change",[wn,kn,bn,Cn])),k(e,s),L.css("left",a),n.trigger("jsp-scroll-x",[-a,e,s])}function b(t,n){F.showArrows&&(an[t?"addClass":"removeClass"]("jspDisabled"),rn[n?"addClass":"removeClass"]("jspDisabled"))}function k(t,n){F.showArrows&&(un[t?"addClass":"removeClass"]("jspDisabled"),hn[n?"addClass":"removeClass"]("jspDisabled"))}function C(t,n){var i=t/(G-Y);v(i*U,n)}function H(t,n){var i=t/(V-X);m(i*Z,n)}function x(n,i,e){var s,o,a,r,c,l=0;try{s=t(n)}catch(p){return}for(o=s.outerHeight(),q.scrollTop(0);!s.is(".jspPane");)if(l+=s.position().top,s=s.offsetParent(),/^body|html$/i.test(s[0].nodeName))return;a=T(),r=a+Y,a>l||i?c=l-F.verticalGutter:l+o>r&&(c=l-Y+o+F.verticalGutter),c&&C(c,e)}function D(){return-L.position().left}function T(){return-L.position().top}function A(){q.unbind(Hn).bind(Hn,function(t,n,i,e){var s=_,o=$;return m(_+i*F.mouseWheelSpeed,!1),v($-e*F.mouseWheelSpeed,!1),s==_&&o==$})}function S(){q.unbind(Hn)}function B(){return!1}function W(){L.unbind("focusin.jsp").bind("focusin.jsp",function(t){t.target!==L[0]&&x(t.target,!1)})}function y(){L.unbind("focusin.jsp")}function I(){var t,i;n.attr("tabindex",0).unbind("keydown.jsp").bind("keydown.jsp",function(e){if(e.target===n[0]){var s=_,o=$,a=t?2:16;switch(e.keyCode){case 40:v($+a,!1);break;case 38:v($-a,!1);break;case 34:case 32:C(T()+Math.max(32,Y)-16);break;case 33:C(T()-Y+16);break;case 35:C(G-Y);break;case 36:C(0);break;case 39:m(_+a,!1);break;case 37:m(_-a,!1)}return s!=_||o!=$?(t=!0,clearTimeout(i),i=setTimeout(function(){t=!1},260),!1):void 0}}),F.hideFocus?(n.css("outline","none"),"hideFocus"in q[0]&&n.attr("hideFocus",!0)):(n.css("outline",""),"hideFocus"in q[0]&&n.attr("hideFocus",!1))}function P(){n.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp")}function M(){if(location.hash&&location.hash.length>1){var n,i;try{n=t(location.hash)}catch(e){return}n.length&&L.find(n)&&(0==q.scrollTop()?i=setInterval(function(){q.scrollTop()>0&&(x(location.hash,!0),t(document).scrollTop(q.position().top),clearInterval(i))},50):(x(location.hash,!0),t(document).scrollTop(q.position().top)))}}function R(){t("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function z(){R(),t("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var t,n=this.href.split("#");return n.length>1&&(t=n[1],t.length>0&&L.find("#"+t).length>0)?(x("#"+t,!0),!1):void 0})}var F,L,X,Y,q,V,G,O,E,N,K,Q,U,$,J,Z,_,tn,nn,en,sn,on,an,rn,cn,ln,pn,dn,un,hn,fn,jn,vn,gn,mn=this,wn=!0,bn=!0,kn=!1,Cn=!1,Hn=t.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";jn=n.css("paddingTop")+" "+n.css("paddingRight")+" "+n.css("paddingBottom")+" "+n.css("paddingLeft"),vn=(parseInt(n.css("paddingLeft"))||0)+(parseInt(n.css("paddingRight"))||0),s(e),t.extend(mn,{reinitialise:function(n){n=t.extend({},n,F),s(n)},scrollToElement:function(t,n,i){x(t,n,i)},scrollTo:function(t,n,i){H(t,i),C(n,i)},scrollToX:function(t,n){H(t,n)},scrollToY:function(t,n){C(t,n)},scrollBy:function(t,n,i){mn.scrollByX(t,i),mn.scrollByY(n,i)},scrollByX:function(t,n){var i=D()+t,e=i/(V-X);m(e*Z,n)},scrollByY:function(t,n){var i=T()+t,e=i/(G-Y);v(e*U,n)},animate:function(t,n,i,e){var s={};s[n]=i,t.animate(s,{duration:F.animateDuration,ease:F.animateEase,queue:!1,step:e})},getContentPositionX:function(){return D()},getContentPositionY:function(){return T()},getIsScrollableH:function(){return K},getIsScrollableV:function(){return N},getContentPane:function(){return L},scrollToBottom:function(t){v(U,t)},hijackInternalLinks:function(){z()}})}n=t.extend({},t.fn.jScrollPane.defaults,n);var s;return this.each(function(){var i=t(this),o=i.data("jsp");o?o.reinitialise(n):(o=new e(i,n),i.data("jsp",o)),s=s?s.add(i):i}),s},t.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:10,arrowButtonSpeed:10,arrowRepeatFreq:100,arrowScrollOnHover:!1,trackClickSpeed:30,trackClickRepeatFreq:100,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1}}(jQuery,this);